--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _QPqdkBNIEemmeedSb1JQew,_jOjx0CCAEem06Mv2pVmYtA
Element-Name: CheckTarmedFallVerrechnen
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _Mr6FcFFuEemrk7fLFkHFEw
Save-Time: 11/26/20, 12:22 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

// AbrechnungsSystemKonfigurieren
// Des muss eine Bankverbindung mit einem Kontakt erstellt werden!!

/*
SetMandantKontaktInfo 1
SetMandantenDetails 1 // Test
ChangeMandant [ GetPraxisProperty praxis.mandant.1.Name ]
*/

let [ val hiloFile [ concat $rcpttDir "hilotec_configured" ] ] {
	if [ get-file $hiloFile | get exists | equals true ] {
		log "ConfigureHilotecODF_TextVerarbeitung already done"
	} -else {
		ConfigureHilotecODF_TextVerarbeitung
		ImportHilotecODF_Vorlagen  [ concat $rcpttDir "elexis-vorlagen-master/openoffice/Tarmedrechnung_EZ.odt" ]
		ImportHilotecODF_Vorlagen  [ concat $rcpttDir "elexis-vorlagen-master/openoffice/TR44_S1.odt" ]
		ImportHilotecODF_Vorlagen  [ concat $rcpttDir "elexis-vorlagen-master/openoffice/TR44_S2.odt" ]
		ImportHilotecODF_Vorlagen  [ concat $rcpttDir "elexis-vorlagen-master/openoffice/Tarmedrechnung_S1.odt" ]
		ImportHilotecODF_Vorlagen  [ concat $rcpttDir "elexis-vorlagen-master/hilotec-odt/ch.elexis.arzttarife_ch/Tarmedrechnung_S2.odt" ] // only hilotec
		str "Configured ConfigureHilotecODF_TextVerarbeitung" | write-lines $hiloFile
	}
}

ChangeMandant [ GetPraxisProperty praxis.mandant.1.Name ]
let [ val keyId patient.100. ] {
	let [ val familyName [ concat [ GetTestProperty [ concat $keyId familyName  ] ] "-" $defaultLanguage] ]
	    [ val firstName  [ GetTestProperty [ concat $keyId firstName ] ] ]
    {
		OpenAndResetStartPerspektive
		ImportPatFallKonsFromProperty patient.100.
		let [ val invoiceId  [ GetHighestInvoiceNrOf ] ] {
			RechnungAusgeben		  -invoiceId $invoiceId
			CheckTarmedFallVerrechnen -invoiceId $invoiceId
		}
	}
}

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
