--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _QPqdkBNIEemmeedSb1JQew,_jOjx0CCAEem06Mv2pVmYtA,_LkBSkBsDEembU9g-6bJhVg
Element-Name: CheckTarmedFallVerrechnen
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _Mr6FcFFuEemrk7fLFkHFEw
Runtime-Version: 2.5.4.202207162355
Save-Time: 7/23/22, 8:39 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

// AbrechnungsSystemKonfigurieren
// Des muss eine Bankverbindung mit einem Kontakt erstellt werden!!

/*
SetMandantKontaktInfo 1
SetMandantenDetails 1 // Test
ChangeMandant [ GetPraxisProperty praxis.mandant.1.Name ]
*/
AllVerrechnungenEntfernen
open-window-by-name  [ t Rechnungsliste ] 
GetNrOfInvoices
// ConfigureHilotecODF_TextVerarbeitung
// ImportAlleHilotecODF_Vorlagen

ChangeMandant [ GetPraxisProperty praxis.mandant.2.Name ]
let [ val keyId patient.104. ] {
	let [ val familyName [ concat [ GetTestProperty [ concat $keyId familyName  ] ] "-" $defaultLanguage] ]
	    [ val firstName  [ GetTestProperty [ concat $keyId firstName ] ] ]
    {
		ImportPatFallKonsFromProperty patient.104.
		let [ val invoiceId  [ GetHighestInvoiceNrOf ] ] {
			AktuellenFallSchliessen
			RechnungAusgeben -druckTyp [ t Als_Tarmed_Rechnung_ausdrucken ] -invoiceId $invoiceId
			CheckTarmedFallVerrechnen -invoiceId $invoiceId -drugName Losartan
		}
	}
}

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
