--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _QPqdkBNIEemmeedSb1JQew,_LkBSkBsDEembU9g-6bJhVg,_jOjx0CCAEem06Mv2pVmYtA,_7pLWIBQVEemEb8FG0wciYA
Element-Name: TarmedFallVerrechnen
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _gN-zEBNWEemmeedSb1JQew
Runtime-Version: 2.4.0.201902121222
Save-Time: 2/14/19 7:33 PM
Testcase-Type: ecl

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

// requires ImportSwissMediBase and BasicMandanten or demoDB run before
global [val testPatFamilyName "Bernasconi"] -override
global [val testPatFirstName "Antonio"] -override

// First we check that the tarmed and blocks are correctly imported
OpenAndResetStartPerspektive
select-tarmed-leistung -ziffer "%00.0025" -fullname "00 Grundleistungen \\(KVG\\)/00.01 Allgemeine Grundleistungen \\(KVG\\)/00.01.01 Konsultation, Besuch, Wegentschädigung u.a. \\(KVG\\)/00.0025 \\+ Konsultation bei Kindern unter 6 Jahren und Personen über 75 Jahren, jede weiteren 5 Min. \\(KVG\\)" | verify-true
select-block -blockName "arzt_Bericht" | verify-true

ChangeMandant [concat [ GetPraxisProperty praxis.mandant.2.Name ] ".*" ]

SetRightToDeleteCase
OpenAndResetStartPerspektive
ConfigureHilotecODF_TextVerarbeitung

if [SelectPatient $testPatFamilyName $testPatFirstName | eq false] {
	PatientenErstellen $testPatFamilyName $testPatFirstName true "30.3.1990" "Nebenstrasse 33" 3320 Elexiskon "055 323 45 67"
}

if [FallOffen -caseLaw [ t case_KVG ] -startDate "201.*"] {
	log "Offenen Fall KVG gefunden"
} -else {
	FallZuPatientErstellen -caseLaw [ t case_KVG ] -caseReason [ t reason_KVG ] -startDate "20.8.2018"
	log "Fall KVG 20.8.2018 erstellt"
}

SelectFall  [ t case_KVG ] "201"

if [ HasKonsSelected | eq false] {
	kons-erstellen [ concat "BasisTests für " $testPatFamilyName " mit KVG" ]
} -else {
	log "HasKonsSelected returned true"
}

// kons-add-eigenleistung
kons-add-block  "kons plus.*"
kons-add-artikelstamm -item_short Losartan -item_long "Losartan.*25 mg.*"
kons-neue-diagnose [ t kons_diagnose.1.reiter ] [ t kons_diagnose.1.item ]


FallSetVersicherungsNummer
AktuellenFallVerrechnen


// AbrechnungsSystemKonfigurieren
// Des muss eine Bankverbindung mit einem Kontakt erstellt werden!!
ImportHilotecODF_Vorlagen  [ concat $rcpttDir "vorlagen/TR44_S1.odt" ]
ImportHilotecODF_Vorlagen  [ concat $rcpttDir "vorlagen/TR44_S2.odt" ]
ImportHilotecODF_Vorlagen  [ concat $rcpttDir "vorlagen/Tarmedrechnung_S1.odt" ]
ImportHilotecODF_Vorlagen  [ concat $rcpttDir "vorlagen/Tarmedrechnung_S2.odt" ]
ImportHilotecODF_Vorlagen  [ concat $rcpttDir "vorlagen/Tarmedrechnung_EZ.odt" ]


RechnungAusgeben

// Ende
//
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
