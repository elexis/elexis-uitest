--- RCPTT testcase ---
Format-Version: 1.0
Context-Type: org.eclipse.rcptt.ctx.ecl
Element-Name: Fall
Element-Type: context
Element-Version: 2.0
Id: _p5Ui8P79EeiFyvHqIglmCA
Runtime-Version: 2.4.0.201812130013
Save-Time: 12/20/18 5:33 PM

------=_.ecl.context-718f04b4-ed39-33e3-af62-0995e4561998
Content-Type: text/ecl
Entry-Name: .ecl.context

proc "set-date-picker-date" [val window ] [ val labelBefore -input ] [ val "date" ] {
	concat "set-date-picker-date: " $date| log
	global [ val myCombo [  get-window $window | get-editbox -after [get-label $labelBefore ] ]] -override
	/*
	with [get-window "nouveau cas"] {
    get-label[ t dlg_new_case_startDate ] | get-property caption | equals[ t dlg_new_case_startDate ] | verify-true
    get-editbox -after [get-label "Créer un nouveau cas"] | get-property className 
        | equals "org.eclipse.swt.widgets.Text" | verify-true
        get-window "nouveau cas" | get-editbox -after [get-label "Créer un nouveau cas"] | get-property text 
    | equals "19.12.18" | verify-true
        */
        // Assertion of text failed: expected:<19.12.18> but was:<0.0>.
	// get-window $window | get-editbox -after [get-label $labelBefore ] | get-property text | equals "19.12.18" | verify-true
    // $myCombo | getObject | invoke | setText $date
    // line above results in error: There is no open report node for command invoke "Spinner {*Wrong Thread*}"
  //  get-window $window | get-editbox -after [get-label $labelBefore ] | get-property text | equals  $date | verify-true	
  	concat "At the moment I do not know how to set datePick date in " $window " after " $labelBefore " to " $date | log
}
proc FallZuPatientErstellen [val caseLaw] [val startDate "30.4.2018"] [val endDate "01.08.2018"] {
	get-view [ t view_cases ] | click
	 t view_cases | log
	 t dlg_new_case_caseReason | log
	get-view [ t view_cases ]| get-button [ t btn_create_new_case ] | log
	get-view [ t view_cases ]| get-button [ t btn_create_new_case ] | click
	wait 100
	
	with [get-window [ t dlg_new_case ] ] {
		get-combo -after [get-label [ t dlg_new_case_caseMethod ]] | select $caseLaw
		set-date-picker-date [ t dlg_new_case ] [ t dlg_new_case_startDate ] $startDate
		set-date-picker-date [ t dlg_new_case ] [ t dlg_new_case_endDate ] $endDate
		get-eclipse-window | get-object | save-screenshot [concat $resultsDir "images/" $caseLaw " " $startDate "_created.png"]
		get-button OK | click
	}
}

proc FallOffen [val caseLaw] [val startDate] {
	let [val searchPattern [concat ".*" $caseLaw ".*"]] {
		try {
			concat "MySearchpattern is: " $searchPattern | log
			get-view [ t view_cases ] | get-table | log
			get-view [ t view_cases ] | get-table | get-item $searchPattern | get-property caption
			bool true  // 0 stands for true
		} -catch {
			// verify-error -command {
			//	get-item $searchPattern
			// }
			// log [concat "Searchpattern " $searchPattern " not found"]
			// get-view [ t view_cases ]| get-table | get-items | length | equals 8888
			bool false // 1 stands for false
		}// get-view [ t view_cases ]| get-table | get-item ".*" | get-property caption | log
		// get-view [ t view_cases ]| get-table | get-item ".*Krank.*" | get-property caption | log
		// get-view [ t view_cases ]| get-table | get-items | length | eq 999
	}
}
------=_.ecl.context-718f04b4-ed39-33e3-af62-0995e4561998--
