--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _QPqdkBNIEemmeedSb1JQew,_LkBSkBsDEembU9g-6bJhVg,_7pLWIBQVEemEb8FG0wciYA,_jOjx0CCAEem06Mv2pVmYtA
Element-Name: BasicKonsTests
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _GbaREP_HEeiXxf0UDvXYOw
Runtime-Version: 2.4.1.201903190000
Save-Time: 4/1/19 3:20 PM
Testcase-Type: ecl
Verifications: _GcdboAX2Eemcp9WoDsgIvA

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

// requires ImportSwissBase and BasicMandanten or demoDB run before
if [SelectPatient "Armes Wesen" Vorname | eq false] {
	PatientenErstellen "Armes Wesen" Vorname true "30.3.1980" "Nebenstrasse 33" 3320 Elexiskon "055 323 45 67"
}
if [SelectPatient Berset Alain | eq false] {
	PatientenErstellen Berset Alain true "9.4.1972" "Hauptstrasse 33" 3003 Bern "033 323 45 67"
}
log "Zwei Patienten vorhanden"
SelectPatient "Armes Wesen" Vorname

if [FallOffen [ t case_KVG ] "201."] {
	log "Offenen Fall KVG gefunden"
} -else {
	FallZuPatientErstellen -caseLaw [ t case_KVG ] -caseReason [ t reason_KVG ] -startDate "20.4.2018"
}

get-eclipse-window | get-object | invoke setSize 1280 1024
resetPerspective

if [SelectPatient Wu Luis | eq false] {
	PatientenErstellen -male true -familyName Wu -firstName Luis -birthDate "13.04.1980" -street "Vorderstrasse 33" -zipCode 3003 -location Bern -phone "033 323 45 67"
}

if [FallOffen -caseLaw [ t case_KVG ] -startDate "201.*"] {
	log "Offenen Fall KVG gefunden"
} -else {
	FallZuPatientErstellen -caseLaw [ t case_KVG ] -caseReason [ t reason_KVG ] -startDate "20.08.2018"
	log "Fall KVG 20.08.2018 erstellt"
}

SelectFall  [ t case_KVG ] "201"

if [ HasKonsSelected | eq false] {
	kons-erstellen "BasisTests f√ºr WuLuis mit KVG"
} -else {
	log "HasKonsSelected returned true"
}
//kons-add-macro
FallSetVersicherungsNummer

kons-add-block  -blockName "kons plus (KVG)" -expectedItemsAdded 4
// kons-add-tarmed [ concat "10.0010" ]
// kons-add-artikelstamm -item_short Losartan -item_long "LOSARTAN.*7 Stk.*"

// TODO: The next two tests work only with the demoDB. We must change them to be able to run them
// via RunFromScratch or a new demoDB initialized with all data
// kons-add-eigenleistung
// kons-add-tarmed
kons-neue-diagnose [ t kons_diagnose.1.reiter ] [ t kons_diagnose.1.item ]

elexisLogMayNotContain "java.lang.OutOfMemoryError"

// Ende
//
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
