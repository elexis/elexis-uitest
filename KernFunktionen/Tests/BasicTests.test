--- RCPTT testcase ---
Format-Version: 1.0
Contexts: _QPqdkBNIEemmeedSb1JQew,_LkBSkBsDEembU9g-6bJhVg,_7pLWIBQVEemEb8FG0wciYA
Element-Name: BasicTests
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _GbaREP_HEeiXxf0UDvXYOw
Runtime-Version: 2.4.0.201901240010
Save-Time: 2/5/19, 12:52 PM
Testcase-Type: ecl
Verifications: _GcdboAX2Eemcp9WoDsgIvA

------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

create-user -userName $currentUniqUser -forMandat  $VerantwortlicherArzt -role fhir -kontakt test
// proc "create-user" [val userName]  [val forMandat] [val role] [val kontakt] {

if [SelectPatient "Armes Wesen" Vorname | eq false] {
	PatientenErstellen "Armes Wesen" Vorname true "30.3.1980" "Nebenstrasse 33" 3320 Elexiskon "055 323 45 67"
}
if [SelectPatient Berset Alain | eq false] {
	PatientenErstellen Berset Alain false "9.4.1972" "Hauptstrasse 33" 3003 Bern "033 323 45 67"
}
log "Zwei Patienten vorhanden"
SelectPatient "Armes Wesen" Vorname

if [FallOffen [ t case_KVG ] "201."] {
	log "Offenen Fall KVG gefunden"
} -else {
	FallZuPatientErstellen -caseLaw [ t case_KVG ] -caseReason [ t reason_KVG ] -startDate "20.4.2018"
}

preferences-use-macros-with-TI-and-Favoriten
get-eclipse-window | get-object | invoke setSize 1280 1024
resetPerspective

SelectPatient Wu Luis
if [FallOffen -caseLaw [ t case_UVG ] -startDate "201.*"] {
	log "Offenen Fall UVG gefunden"
} -else {
	FallZuPatientErstellen -caseLaw [ t case_UVG ] -caseReason [ t reason_UVG ] -startDate "20.8.2018"
	log "Fall UVG 20.8.2018 erstellt"
}

SelectFall  [ t case_UVG ] "201"

if [ HasKonsSelected | eq false] {
	kons-erstellen "BasisTests f√ºr WuLuis mit UVG"
} -else {
	log "HasKonsSelected returned true"
}
kons-add-macro

// TODO: The next two tests work only with the demoDB. We must change them to be able to run them
// via RunFromScratch or a new demoDB initialized with all data
// kons-add-eigenleistung
// kons-add-tarmed
kons-neue-diagnose [ t kons_diagnose.1.reiter ] [ t kons_diagnose.1.item ]

SetMandantenDetails

// To print an AUF we need a text plugin. list of krankenkasse, AUF vorlagen
ConfigureHilotecODF_TextVerarbeitung
ImportHilotecODF_Vorlagen
ReadDataImport -file [ concat  [get-user-dir] "/rcptt/Universal_krankenkasse.xls" ]
FallErzeugeAUF -percentage 50 -reason "RCP Test Grund" -comment "Und ein noch besserer Kommentar"
ErzeugeBriefZuAUT -reason "RCP Test Grund" 
// TODO: 
// AktuellenFallVerrechnen
// RechnungAusgeben

// Ende
//
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
